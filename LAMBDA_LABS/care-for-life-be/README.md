# Care for Life Backend 
Backend for Lambda Labs: Care for Life

## DEPLOY URL: 
https://care-for-life.herokuapp.com/

## Environment Variables: 
```
1. PORT=5500
2. NODE_ENV=development
3. USERNAME=postgres username
4. PASSWORD=postgres password
```
## Table of Contents

- [Auth Routes](#auth-routes)
- [Communities Routes](#community-routes)
- [Zone Routes](#zone-routes)
- [Role Routes](#role-routes)
- [Worker Routes](#worker-routes)
- [Family Routes](#family-routes)
- [Individual Routes](#individual-routes)
- [Survey Routes](#survey-routes)
- [Question Routes](#question-routes)
- [Response Routes](#response-routes)

## AUTH ROUTES
### **LOGIN/REGISTER**
|Method   |URL   |Description   |
|---|---|---|
|GET   |/auth/login   |Returns an object containing user first_name, last_name, email, and isRegistered flag returns true if current user exists in the database, otherwise will return false.   |


## COMMUNITY ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/communities   |Returns an array of communities, and each community will contain an array of corresponding zones.   |
|GET   |/api/communities/:id   |Returns community object with specified ID from URL   |
|POST   |/api/communities   |Creates a new community object. Request body: { community: 'community_name' } ID is generated by the database. Returns new object.   |
|PUT   |/api/communities/:id   |Updates a community object. Request body: { id: id, community: 'community_name' } Returns updated object  |
|DELETE   |/api/communities/:id   |Deletes community from database using specified ID from URL. Returns success message.   |


## ZONE ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/zones   |Returns an array of zones   |
|GET   |/api/zones/:id   |Returns zone object with specified zone ID from URL   |
|GET   |/api/zones/comm/:id   |Returns an array of zones associated with Community ID specified in URL   |
|POST   |/api/zones   |Creates a new zone object. Request body: { zone_letter: 'letter', community_id: commId } Returns new object.  |
|PUT   |/api/zones/:id   |Updates zone object. Request body: { id: id, zone_letter: 'letter', community_id: commId } Returns updated object.  |
|DELETE   |/api/zones/:id   |Deletes zone from database using specified ID from URL. Returns success message.   |

## ROLE ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/roles   |Returns an array of role names and IDs   |
|GET   |/api/roles/:id   |Returns role object associated with specified ID from URL   |
|POST   |/api/roles   |Creates a new role object    |
|PUT   |/api/roles/:id   |Updates role object using info from request body: { id: id, role: 'role_name' }   |
|DELETE   |/api/roles/:id   |Deletes role from database using specified ID from URL. Returns success message.    |

## WORKER ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/workers   |Returns an array of workers.   |
|GET   |/api/workers/:id   |Returns worker object associated with specified ID from URL   |
|GET   |/api/workers/role/:role_name   |Returns an array of workers associated with role name specified in URL   |
|POST   |/api/workers   |Creates a new worker object, request body: { first_name: 'firstname', last_name: 'lastname', email: 'email', role_name: 'rolename', zone_id: zoneid, community_id: commId } Returns new object.   |
|PUT   |/api/workers/:id   |Updates worker object, request body: { id: id, first_name: 'firstname', last_name: 'lastname', email: 'email', role_name: 'rolename', zone_id: zoneid, community_id: commId } Returns new object.   |
|DELETE   |/api/workers/:id   |Deletes worker object associated with ID specified in URL. Returns success message   |

## FAMILY ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/families   |Returns an array of families.   |
|GET   |/api/families/:id   |Returns family object associated with ID specified in URL   |
|GET   |/api/families/zone/:zoneId   |Returns an array of families associated with the zone ID specified in URL   |
|GET   |/api/families/:id/members   |Returns an array of individuals associated with family ID passed in URL  |
|POST   |/api/families   |Creates a new family object. Request body: { family_name: 'famname', zone_id: zoneId, community_id: commId } Returns new object.  |
|PUT   |/api/families/:id   |Updates family object associated to specified ID in URL. Request body: { id: id, family_name: 'famname', zone_id: zoneId, community_id: commId } Returns updated object.   |
|DELETE   |/api/families/:id   |Deletes family object associated with ID specified in URL. Returns success message.   |

## INDIVIDUAL ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/individuals   |Returns an array of individuals   |
|GET   |/api/individuals/:id   |Returns individual object associated with ID in URL   |
|GET   |/api/individuals/family/:id   |Returns an array of individuals associated with family ID specified in URL   |
|POST   |/api/individuals   |Creates a new individual object. Request body: { first_name: 'firstname', last_name: 'lastname', family_id: famId, date_of_birth: dob, gender: gender, hoh: boolean, relation_to_hoh: string, marital_status: string } Returns new object  |
|PUT   |/api/individuals/:id   |Updates an individual object. Request body: { id: id, first_name: 'firstname', last_name: 'lastname', family_id: famId, date_of_birth: dob, gender: gender, hoh: boolean, relation_to_hoh: string, marital_status: string } Returns updated object   |
|DELETE   |/api/individuals/:id   |Deletes individual object associated with specified ID in URL. Returns success message   |

## SURVEY ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/surveys   |Returns an array of surveys   |
|GET   |/api/surveys/:id   |Returns survey object associated with specified ID in URL   |
|GET   |/api/surveys/:id/questions   |Returns an object with survey name, including an array of questions associated with survey ID specified in URL   |
|POST   |/api/surveys   |Creates a new survey object. Request body: { survey_name: 'surveyname' } Returns new object.  |
|PUT   |/api/surveys/:id   |Updates survey object associated with specified ID in URL. Request body: { id: id, survey_name: 'surveyname' } Returns updated object  |
|DELETE   |/api/surveys/:id   |Deletes survey object associated with specified ID in URL. Returns success message.   |
|GET   |/api/surveyRoles   |Returns an array of objects that specify survey IDs and their corresponding roles   |
|GET   |/api/surveyRoles/surveyId/:id   |Returns an array of objects specifying the role IDs that associate with specified surveyId in URL   |
|GET   |/api/surveyRoles/roleId/:id   |Returns an array of objects speficying the Survey IDs that associate with specified role ID in URL   |
|POST   |/api/surveyRoles   |Creates a new relation between survey and role. Request body: { survey_id: surveyId, role_id: roleId } Returns new object   |
|PUT   |/api/surveyRoles/:id   |Updates survey role object. Request body { id: id, survey_id: surveyId, role_id: roleId } Returns updated object.   |
|DELETE   |/api/surveyRoles/:id   |Deletes survey_role relation associated with specified ID in URL. Returns success message.   |
|GET   |/api/completedSurveys   |Returns an array of completed surveys   |
|GET   |/api/completedSurveys/:id   |Returns completed survey object associated with ID in URL   |
|POST   |/api/completedSurveys   |Creates a new completed survey object. Request body: { survey_id: surveyId, supervisor_id: workerId, family_id: famId, individualId: indivId(nullable) } Returns new object |
|PUT   |/api/completedSurveys/:id   |Updates completed survey object. Request body: { id: id, survey_id: surveyId, supervisor_id: workerId, family_id: famId, individualId: indivId(nullable) } Returns updated object.  |
|DELETE   |/api/completedSurveys/:id   |Deletes completed survey object from ID in URL. Returns success message.   |


## QUESTION ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/questions   |Returns an array of all survey questions for all surveys from the database   |
|GET   |/api/questions/:id   |Returns question object associated to specified ID in URL   |
|POST   |/api/questions/   |Creates a new question object. Request body: { question: 'question text', survey_id: surveyId } Returns new object.  |
|PUT   |/api/questions/:id   |Updates question object. Request body: { id: id, question: 'question text', survey_id: surveyId } Returns updated object.   |
|DELETE   |/api/questions/:id   |Deletes question from database. Returns success message.   |

## RESPONSE ROUTES

|Method   |URL   |Description   |
|---|---|---|
|GET   |/api/responses   |Returns an array of all of the responses to every survey in the database.   |
|GET   |/api/responses/:id   |Returns specific response associated with ID in URL   |
|GET   |/api/responses/question/:id   |Returns all responses to specific question ID specified in URL   |
|POST   |/api/responses/   |Creates a new response object. Request body: { response: 'response', question_id: questionId, completed_survey_id: surveyid, family_id: famId, individual_id: indivId(nullable) } Returns new object.   |
|PUT   |/api/responses/:id   |Updates response object. Request body: { id: id, response: 'response', question_id: questionId, completed_survey_id: surveyid, family_id: famId, individual_id: indivId(nullable) } Returns updated object.    |
|DELETE   |/api/responses/:id   |Deletes response object associated with ID in URL. Returns success message.   |
|   |   |   |
